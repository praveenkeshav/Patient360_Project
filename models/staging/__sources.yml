version: 2

sources:
  - name: ehr
    database: pv360
    schema: raw
    description: Raw EHR and claims data for the Patient 360 project.
    config:
      freshness:
        warn_after: {count: 24, period: hour}
        error_after: {count: 48, period: hour}
      loaded_at_field: load_ts
      
    tables:
      - name: patients_raw
        description: Patient demographic and registry information.
        columnns:
          - name: patient_id
            description: Unique identifier for each patient.
            data_tests:
              - unique
              - not_null
          - name: full_name
            description: Full name of the patient.
            data_tests:
              - not_null
          - name: date_of_birth
            description: Date of birth of the patient.
            data_tests:
              - not_null
          - name: gender
            description: Gender of the patient.
            data_tests:
              - accepted_values:
                  arguments:
                    values: ['M', 'F']
          - name: load_ts
            description: Timestamp when the record was loaded into the raw table.
            data_tests:
              - not_null
               

